{"ast":null,"code":"var _jsxFileName = \"D:\\\\GidHub Progects\\\\REACT\\\\goit-react-hw-03-image-finder\\\\src\\\\components\\\\App.jsx\";\nimport React, { Component } from 'react';\nimport { ToastContainer, toast } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\nimport Searchbar from './Searchbar';\nimport ImageGallery from './ImageGallery';\nimport Loader from './Loader';\nimport Button from './Button';\nimport Modal from './Modal';\nimport s from './App.module.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst API_KEY = '28110044-3839a7ba2829cb27452711db2';\nconst BASE_URL = 'https://pixabay.com/api/';\n\nclass App extends Component {\n  constructor() {\n    super(...arguments);\n    this.state = {\n      searchQuery: '',\n      data: [],\n      loading: false,\n      page: 0,\n      showModal: false,\n      largeImageURL: '',\n      isVisible: false\n    };\n\n    this.handleFormSubmit = _ref => {\n      let {\n        searchQuery\n      } = _ref;\n      this.setState({\n        searchQuery,\n        data: [],\n        page: 1,\n        isVisible: true\n      });\n    };\n\n    this.handleButtonClick = () => {\n      this.setState(prevState => ({\n        page: prevState.page + 1\n      }));\n    };\n\n    this.toggleModal = largeImageURL => {\n      this.setState(prevState => ({\n        showModal: !prevState.showModal,\n        largeImageURL: largeImageURL\n      }));\n    };\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    const prevPage = prevState.page;\n    const nextPage = this.state.page;\n    const prevQuery = prevState.searchQuery;\n    const nextQuery = this.state.searchQuery;\n\n    if (prevPage !== nextPage || prevQuery !== nextQuery) {\n      this.setState({\n        loading: true\n      });\n      fetch(`${BASE_URL}?q=${this.state.searchQuery}&page=${this.state.page}&key=${API_KEY}&image_type=photo&orientation=horizontal&per_page=12`).then(response => {\n        if (!response.ok) {\n          throw Error('Oops, there is no image with your search query');\n        }\n\n        return response.json();\n      }).then(response => {\n        if (response.totalHits - this.state.page * 12 < 12) {\n          this.setState({\n            isVisible: false\n          });\n        }\n\n        if (response.hits.length === 0) {\n          toast.error('Sorry, there are no images matching your search query. Please try again.');\n          this.setState({\n            loading: false\n          });\n          return;\n        }\n\n        this.setState(prevState => ({\n          data: [...prevState.data, ...response.hits],\n          loading: false\n        }));\n      }).catch(error => toast.error(`${error}`));\n    }\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(Searchbar, {\n        onSubmit: this.handleFormSubmit\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 9\n      }, this), this.state.data.length !== 0 && /*#__PURE__*/_jsxDEV(ImageGallery, {\n        data: this.state.data,\n        onClick: this.toggleModal\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: s.centeredBox,\n        children: [this.state.loading && /*#__PURE__*/_jsxDEV(Loader, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 34\n        }, this), this.state.isVisible && /*#__PURE__*/_jsxDEV(Button, {\n          onClick: this.handleButtonClick\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 9\n      }, this), this.state.showModal && /*#__PURE__*/_jsxDEV(Modal, {\n        largeImageURL: this.state.largeImageURL,\n        alt: this.state.searchQuery,\n        onClose: this.toggleModal\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(ToastContainer, {\n        autoClose: 1500,\n        position: \"top-center\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["D:/GidHub Progects/REACT/goit-react-hw-03-image-finder/src/components/App.jsx"],"names":["React","Component","ToastContainer","toast","Searchbar","ImageGallery","Loader","Button","Modal","s","API_KEY","BASE_URL","App","state","searchQuery","data","loading","page","showModal","largeImageURL","isVisible","handleFormSubmit","setState","handleButtonClick","prevState","toggleModal","componentDidUpdate","prevProps","prevPage","nextPage","prevQuery","nextQuery","fetch","then","response","ok","Error","json","totalHits","hits","length","error","catch","render","centeredBox"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,SAASC,cAAT,EAAyBC,KAAzB,QAAsC,gBAAtC;AACA,OAAO,uCAAP;AAEA,OAAOC,SAAP,MAAsB,aAAtB;AACA,OAAOC,YAAP,MAAyB,gBAAzB;AACA,OAAOC,MAAP,MAAmB,UAAnB;AACA,OAAOC,MAAP,MAAmB,UAAnB;AACA,OAAOC,KAAP,MAAkB,SAAlB;AAEA,OAAOC,CAAP,MAAc,kBAAd;;AAEA,MAAMC,OAAO,GAAG,oCAAhB;AACA,MAAMC,QAAQ,GAAG,0BAAjB;;AAEA,MAAMC,GAAN,SAAkBX,SAAlB,CAA4B;AAAA;AAAA;AAAA,SAC1BY,KAD0B,GAClB;AACNC,MAAAA,WAAW,EAAE,EADP;AAENC,MAAAA,IAAI,EAAE,EAFA;AAGNC,MAAAA,OAAO,EAAE,KAHH;AAINC,MAAAA,IAAI,EAAE,CAJA;AAKNC,MAAAA,SAAS,EAAE,KALL;AAMNC,MAAAA,aAAa,EAAE,EANT;AAONC,MAAAA,SAAS,EAAE;AAPL,KADkB;;AAAA,SAiD1BC,gBAjD0B,GAiDP,QAAqB;AAAA,UAApB;AAAEP,QAAAA;AAAF,OAAoB;AACtC,WAAKQ,QAAL,CAAc;AAAER,QAAAA,WAAF;AAAeC,QAAAA,IAAI,EAAE,EAArB;AAAyBE,QAAAA,IAAI,EAAE,CAA/B;AAAkCG,QAAAA,SAAS,EAAE;AAA7C,OAAd;AACD,KAnDyB;;AAAA,SAqD1BG,iBArD0B,GAqDN,MAAM;AACxB,WAAKD,QAAL,CAAcE,SAAS,KAAK;AAAEP,QAAAA,IAAI,EAAEO,SAAS,CAACP,IAAV,GAAiB;AAAzB,OAAL,CAAvB;AACD,KAvDyB;;AAAA,SAyD1BQ,WAzD0B,GAyDZN,aAAa,IAAI;AAC7B,WAAKG,QAAL,CAAcE,SAAS,KAAK;AAC1BN,QAAAA,SAAS,EAAE,CAACM,SAAS,CAACN,SADI;AAE1BC,QAAAA,aAAa,EAAEA;AAFW,OAAL,CAAvB;AAID,KA9DyB;AAAA;;AAW1BO,EAAAA,kBAAkB,CAACC,SAAD,EAAYH,SAAZ,EAAuB;AACvC,UAAMI,QAAQ,GAAGJ,SAAS,CAACP,IAA3B;AACA,UAAMY,QAAQ,GAAG,KAAKhB,KAAL,CAAWI,IAA5B;AACA,UAAMa,SAAS,GAAGN,SAAS,CAACV,WAA5B;AACA,UAAMiB,SAAS,GAAG,KAAKlB,KAAL,CAAWC,WAA7B;;AAEA,QAAIc,QAAQ,KAAKC,QAAb,IAAyBC,SAAS,KAAKC,SAA3C,EAAsD;AACpD,WAAKT,QAAL,CAAc;AAAEN,QAAAA,OAAO,EAAE;AAAX,OAAd;AACAgB,MAAAA,KAAK,CACF,GAAErB,QAAS,MAAK,KAAKE,KAAL,CAAWC,WAAY,SAAQ,KAAKD,KAAL,CAAWI,IAAK,QAAOP,OAAQ,sDAD5E,CAAL,CAGGuB,IAHH,CAGQC,QAAQ,IAAI;AAChB,YAAI,CAACA,QAAQ,CAACC,EAAd,EAAkB;AAChB,gBAAMC,KAAK,CAAC,gDAAD,CAAX;AACD;;AACD,eAAOF,QAAQ,CAACG,IAAT,EAAP;AACD,OARH,EASGJ,IATH,CASQC,QAAQ,IAAI;AAChB,YAAIA,QAAQ,CAACI,SAAT,GAAqB,KAAKzB,KAAL,CAAWI,IAAX,GAAkB,EAAvC,GAA4C,EAAhD,EAAoD;AAClD,eAAKK,QAAL,CAAc;AAAEF,YAAAA,SAAS,EAAE;AAAb,WAAd;AACD;;AACD,YAAIc,QAAQ,CAACK,IAAT,CAAcC,MAAd,KAAyB,CAA7B,EAAgC;AAC9BrC,UAAAA,KAAK,CAACsC,KAAN,CACE,0EADF;AAGA,eAAKnB,QAAL,CAAc;AAAEN,YAAAA,OAAO,EAAE;AAAX,WAAd;AACA;AACD;;AACD,aAAKM,QAAL,CAAcE,SAAS,KAAK;AAC1BT,UAAAA,IAAI,EAAE,CAAC,GAAGS,SAAS,CAACT,IAAd,EAAoB,GAAGmB,QAAQ,CAACK,IAAhC,CADoB;AAE1BvB,UAAAA,OAAO,EAAE;AAFiB,SAAL,CAAvB;AAID,OAxBH,EAyBG0B,KAzBH,CAyBSD,KAAK,IAAItC,KAAK,CAACsC,KAAN,CAAa,GAAEA,KAAM,EAArB,CAzBlB;AA0BD;AACF;;AAmBDE,EAAAA,MAAM,GAAG;AACP,wBACE;AAAA,8BACE,QAAC,SAAD;AAAW,QAAA,QAAQ,EAAE,KAAKtB;AAA1B;AAAA;AAAA;AAAA;AAAA,cADF,EAEG,KAAKR,KAAL,CAAWE,IAAX,CAAgByB,MAAhB,KAA2B,CAA3B,iBACC,QAAC,YAAD;AAAc,QAAA,IAAI,EAAE,KAAK3B,KAAL,CAAWE,IAA/B;AAAqC,QAAA,OAAO,EAAE,KAAKU;AAAnD;AAAA;AAAA;AAAA;AAAA,cAHJ,eAKE;AAAK,QAAA,SAAS,EAAEhB,CAAC,CAACmC,WAAlB;AAAA,mBACG,KAAK/B,KAAL,CAAWG,OAAX,iBAAsB,QAAC,MAAD;AAAA;AAAA;AAAA;AAAA,gBADzB,EAEG,KAAKH,KAAL,CAAWO,SAAX,iBACC,QAAC,MAAD;AAAQ,UAAA,OAAO,EAAE,KAAKG;AAAtB;AAAA;AAAA;AAAA;AAAA,gBAHJ;AAAA;AAAA;AAAA;AAAA;AAAA,cALF,EAWG,KAAKV,KAAL,CAAWK,SAAX,iBACC,QAAC,KAAD;AACE,QAAA,aAAa,EAAE,KAAKL,KAAL,CAAWM,aAD5B;AAEE,QAAA,GAAG,EAAE,KAAKN,KAAL,CAAWC,WAFlB;AAGE,QAAA,OAAO,EAAE,KAAKW;AAHhB;AAAA;AAAA;AAAA;AAAA,cAZJ,eAkBE,QAAC,cAAD;AAAgB,QAAA,SAAS,EAAE,IAA3B;AAAiC,QAAA,QAAQ,EAAC;AAA1C;AAAA;AAAA;AAAA;AAAA,cAlBF;AAAA;AAAA;AAAA;AAAA;AAAA,YADF;AAsBD;;AAxFyB;;AA2F5B,eAAeb,GAAf","sourcesContent":["import React, { Component } from 'react';\r\nimport { ToastContainer, toast } from 'react-toastify';\r\nimport 'react-toastify/dist/ReactToastify.css';\r\n\r\nimport Searchbar from './Searchbar';\r\nimport ImageGallery from './ImageGallery';\r\nimport Loader from './Loader';\r\nimport Button from './Button';\r\nimport Modal from './Modal';\r\n\r\nimport s from './App.module.css';\r\n\r\nconst API_KEY = '28110044-3839a7ba2829cb27452711db2';\r\nconst BASE_URL = 'https://pixabay.com/api/';\r\n\r\nclass App extends Component {\r\n  state = {\r\n    searchQuery: '',\r\n    data: [],\r\n    loading: false,\r\n    page: 0,\r\n    showModal: false,\r\n    largeImageURL: '',\r\n    isVisible: false,\r\n  };\r\n\r\n  componentDidUpdate(prevProps, prevState) {\r\n    const prevPage = prevState.page;\r\n    const nextPage = this.state.page;\r\n    const prevQuery = prevState.searchQuery;\r\n    const nextQuery = this.state.searchQuery;\r\n\r\n    if (prevPage !== nextPage || prevQuery !== nextQuery) {\r\n      this.setState({ loading: true });\r\n      fetch(\r\n        `${BASE_URL}?q=${this.state.searchQuery}&page=${this.state.page}&key=${API_KEY}&image_type=photo&orientation=horizontal&per_page=12`\r\n      )\r\n        .then(response => {\r\n          if (!response.ok) {\r\n            throw Error('Oops, there is no image with your search query');\r\n          }\r\n          return response.json();\r\n        })\r\n        .then(response => {\r\n          if (response.totalHits - this.state.page * 12 < 12) {\r\n            this.setState({ isVisible: false });\r\n          }\r\n          if (response.hits.length === 0) {\r\n            toast.error(\r\n              'Sorry, there are no images matching your search query. Please try again.'\r\n            );\r\n            this.setState({ loading: false });\r\n            return;\r\n          }\r\n          this.setState(prevState => ({\r\n            data: [...prevState.data, ...response.hits],\r\n            loading: false,\r\n          }));\r\n        })\r\n        .catch(error => toast.error(`${error}`));\r\n    }\r\n  }\r\n\r\n\r\n  handleFormSubmit = ({ searchQuery }) => {\r\n    this.setState({ searchQuery, data: [], page: 1, isVisible: true });\r\n  };\r\n\r\n  handleButtonClick = () => {\r\n    this.setState(prevState => ({ page: prevState.page + 1 }));\r\n  };\r\n\r\n  toggleModal = largeImageURL => {\r\n    this.setState(prevState => ({\r\n      showModal: !prevState.showModal,\r\n      largeImageURL: largeImageURL,\r\n    }));\r\n  };\r\n\r\n\r\n  render() {\r\n    return (\r\n      <div>\r\n        <Searchbar onSubmit={this.handleFormSubmit} />\r\n        {this.state.data.length !== 0 && (\r\n          <ImageGallery data={this.state.data} onClick={this.toggleModal} />\r\n        )}\r\n        <div className={s.centeredBox}>\r\n          {this.state.loading && <Loader />}\r\n          {this.state.isVisible && (\r\n            <Button onClick={this.handleButtonClick} />\r\n          )}\r\n        </div>\r\n        {this.state.showModal && (\r\n          <Modal\r\n            largeImageURL={this.state.largeImageURL}\r\n            alt={this.state.searchQuery}\r\n            onClose={this.toggleModal}\r\n          />\r\n        )}\r\n        <ToastContainer autoClose={1500} position=\"top-center\" />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default App;\r\n\r\n"]},"metadata":{},"sourceType":"module"}